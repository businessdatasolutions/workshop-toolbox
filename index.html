<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Trainer's Toolbox</title>
    <!-- Materialize CSS and Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
        background-color: #f5f5f5;
      }
      main {
        flex: 1 0 auto;
        padding: 20px 0;
      }
      .card .card-content {
        height: 150px;
      }
      .card .card-action {
        border-top: 1px solid rgba(160, 160, 160, 0.2);
        padding: 16px 24px;
      }
      .card-title {
        font-weight: 500 !important;
      }
      .tool-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .tool-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.2);
      }
      .btn-floating {
        position: fixed;
        right: 23px;
        bottom: 23px;
      }
      #search-tools {
        margin-bottom: 30px;
      }
      .category-chip {
        margin: 5px;
        cursor: pointer;
      }
      .category-chip.active {
        background-color: #26a69a;
        color: white;
      }
      .card-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8rem;
        color: white;
        background-color: #26a69a;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="teal darken-2">
      <div class="nav-wrapper container">
        <a href="#" class="brand-logo">Digital Trainer's Toolbox</a>
        <a href="#" data-target="mobile-nav" class="sidenav-trigger"
          ><i class="material-icons">menu</i></a
        >
        <ul class="right hide-on-med-and-down">
          <li>
            <a href="#"
              ><i class="material-icons left">dashboard</i>All Tools</a
            >
          </li>
          <li>
            <a href="#"><i class="material-icons left">star</i>Favorites</a>
          </li>
          <li>
            <a href="#"><i class="material-icons left">info</i>About</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Mobile Navigation -->
    <ul class="sidenav" id="mobile-nav">
      <li>
        <div class="user-view">
          <div class="background teal darken-2"></div>
          <span class="white-text name">Digital Trainer's Toolbox</span>
        </div>
      </li>
      <li>
        <a href="#"><i class="material-icons">dashboard</i>All Tools</a>
      </li>
      <li>
        <a href="#"><i class="material-icons">star</i>Favorites</a>
      </li>
      <li>
        <a href="#"><i class="material-icons">info</i>About</a>
      </li>
      <li><div class="divider"></div></li>
      <li><a class="subheader">Categories</a></li>
      <li><a class="waves-effect" href="#!">Brainstorming</a></li>
      <li><a class="waves-effect" href="#!">Exercise</a></li>
      <li><a class="waves-effect" href="#!">Workbook</a></li>
      <li><a class="waves-effect" href="#!">Presentation</a></li>
    </ul>

    <main>
      <div class="container">
        <!-- Search and Filter Section -->
        <div class="row">
          <div class="col s12">
            <div class="card">
              <div class="card-content">
                <span class="card-title">Find Tools</span>
                <div class="row">
                  <div class="input-field col s12 m6">
                    <i class="material-icons prefix">search</i>
                    <input id="search-tools" type="text" class="validate" />
                    <label for="search-tools">Search Tools</label>
                  </div>
                  <div class="col s12 m6">
                    <div class="filter-categories">
                      <div
                        class="chip category-chip active"
                        data-category="all"
                      >
                        All
                      </div>
                      <div
                        class="chip category-chip"
                        data-category="brainstorming"
                      >
                        Brainstorming
                      </div>
                      <div class="chip category-chip" data-category="exercise">
                        Exercise
                      </div>
                      <div class="chip category-chip" data-category="workbook">
                        Workbook
                      </div>
                      <div
                        class="chip category-chip"
                        data-category="presentation"
                      >
                        Presentation
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tools Grid -->
        <div class="row" id="tools-container">
          <!-- Tool cards will be dynamically inserted here -->
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="page-footer teal darken-2">
      <div class="container">
        <div class="row">
          <div class="col s12 m8">
            <h5 class="white-text">About The Toolbox</h5>
            <p class="grey-text text-lighten-4">
              A centralized hub for all your digital training tools. Easily
              access and manage your custom webapps from one location.
            </p>
          </div>
          <div class="col s12 m4">
            <h5 class="white-text">Connect</h5>
            <ul>
              <li>
                <a class="grey-text text-lighten-3" href="#!"
                  ><i class="material-icons tiny">email</i> Contact</a
                >
              </li>
              <li>
                <a class="grey-text text-lighten-3" href="#!"
                  ><i class="material-icons tiny">help</i> Help & FAQ</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
          © 2025 Digital Trainer's Toolbox
          <a class="grey-text text-lighten-4 right" href="#!">Privacy Policy</a>
        </div>
      </div>
    </footer>

    <!-- Add Tool Button -->
    <a
      class="btn-floating btn-large waves-effect waves-light teal modal-trigger"
      href="#add-tool-modal"
      ><i class="material-icons">add</i></a
    >

    <!-- Add Tool Modal -->
    <div id="add-tool-modal" class="modal">
      <div class="modal-content">
        <h4>Add New Tool</h4>
        <div class="row">
          <form class="col s12" id="add-tool-form">
            <div class="row">
              <div class="input-field col s12">
                <input id="tool-name" type="text" class="validate" required />
                <label for="tool-name">Tool Name</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <textarea
                  id="tool-description"
                  class="materialize-textarea"
                  required
                ></textarea>
                <label for="tool-description">Description</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <input id="tool-url" type="url" class="validate" required />
                <label for="tool-url">URL</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <select id="tool-category" required>
                  <option value="" disabled selected>Choose a category</option>
                  <option value="brainstorming">Brainstorming</option>
                  <option value="exercise">Exercise</option>
                  <option value="workbook">Workbook</option>
                  <option value="presentation">Presentation</option>
                </select>
                <label>Category</label>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat"
          >Cancel</a
        >
        <a
          href="#!"
          class="waves-effect waves-light btn teal"
          id="save-tool-btn"
          >Save</a
        >
      </div>
    </div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      // Sample tools data
      let tools = [
        {
          id: 1,
          name: "Whiteboard",
          description:
            "An interactive, client‑side canvas built with HTML, CSS, and JavaScript. It allows you to create, move, and customize visual elements in real time—all with an intuitive drag‑and‑drop interface.",
          url: "https://businessdatasolutions.github.io/whiteboard/",
          category: "brainstorming",
          isFavorite: true,
          dateAdded: "2025-01-15",
        },
        {
          id: 2,
          name: "Culture Test",
          description:
            "Een interactieve web-applicatie voor het diagnosticeren en analyseren van organisatieculturen op basis van de typologie van Harrison.",
          url: "https://businessdatasolutions.github.io/culture-test/",
          category: "exercise",
          isFavorite: true,
          dateAdded: "2025-01-15",
        },
      ];

      // DOM elements
      const toolsContainer = document.getElementById("tools-container");
      const searchInput = document.getElementById("search-tools");
      const categoryChips = document.querySelectorAll(".category-chip");
      const addToolForm = document.getElementById("add-tool-form");
      const saveToolBtn = document.getElementById("save-tool-btn");

      // Initialize Materialize components
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize sidenav
        const sidenav = document.querySelectorAll(".sidenav");
        M.Sidenav.init(sidenav);

        // Initialize modals
        const modals = document.querySelectorAll(".modal");
        M.Modal.init(modals);

        // Initialize select inputs
        const selects = document.querySelectorAll("select");
        M.FormSelect.init(selects);

        // Initialize tooltips
        const tooltips = document.querySelectorAll(".tooltipped");
        M.Tooltip.init(tooltips);

        // Load tools from localStorage if available
        const savedTools = localStorage.getItem("toolsData");
        if (savedTools) {
          tools = JSON.parse(savedTools);
        }

        // Display tools
        renderTools();
      });

      // Render tools based on current filter
      function renderTools(filterCategory = "all", searchQuery = "") {
        // Clear tools container
        toolsContainer.innerHTML = "";

        // Filter tools based on category and search query
        const filteredTools = tools.filter((tool) => {
          const matchesCategory =
            filterCategory === "all" || tool.category === filterCategory;
          const matchesSearch =
            tool.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
            tool.description.toLowerCase().includes(searchQuery.toLowerCase());
          return matchesCategory && matchesSearch;
        });

        // Check if no tools match the criteria
        if (filteredTools.length === 0) {
          toolsContainer.innerHTML = `
          <div class="col s12 center-align">
            <h5>No tools found</h5>
            <p>Try adjusting your search or add a new tool.</p>
          </div>
        `;
          return;
        }

        // Create and append tool cards
        filteredTools.forEach((tool) => {
          const toolCard = document.createElement("div");
          toolCard.className = "col s12 m6 l4";
          toolCard.innerHTML = `
          <div class="card tool-card" data-id="${tool.id}">
            <div class="card-content">
              <span class="card-title">${tool.name}</span>
              ${
                tool.isFavorite
                  ? '<span class="card-badge">★ Favorite</span>'
                  : ""
              }
              <p>${tool.description}</p>
            </div>
            <div class="card-action">
              <a href="${
                tool.url
              }" target="_blank" class="btn waves-effect waves-light teal">Open Tool</a>
              <a class="btn-floating btn-small waves-effect waves-light right ${
                tool.isFavorite ? "amber" : "grey"
              } favorite-btn" 
                 data-id="${tool.id}">
                <i class="material-icons">star</i>
              </a>
              <a class="btn-floating btn-small waves-effect waves-light right red delete-btn" style="margin-right: 10px;" 
                 data-id="${tool.id}">
                <i class="material-icons">delete</i>
              </a>
            </div>
          </div>
        `;
          toolsContainer.appendChild(toolCard);
        });

        // Add event listeners to the newly created buttons
        addButtonEventListeners();
      }

      // Add event listeners to buttons
      function addButtonEventListeners() {
        // Favorite buttons
        document.querySelectorAll(".favorite-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const toolId = parseInt(this.getAttribute("data-id"));
            toggleFavorite(toolId);
          });
        });

        // Delete buttons
        document.querySelectorAll(".delete-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const toolId = parseInt(this.getAttribute("data-id"));
            deleteTool(toolId);
          });
        });
      }

      // Toggle favorite status
      function toggleFavorite(toolId) {
        const toolIndex = tools.findIndex((tool) => tool.id === toolId);
        if (toolIndex !== -1) {
          tools[toolIndex].isFavorite = !tools[toolIndex].isFavorite;

          // Save to localStorage
          localStorage.setItem("toolsData", JSON.stringify(tools));

          // Re-render tools
          const activeCategory = document
            .querySelector(".category-chip.active")
            .getAttribute("data-category");
          const currentSearch = searchInput.value;
          renderTools(activeCategory, currentSearch);

          // Show feedback
          M.toast({
            html: `${
              tools[toolIndex].isFavorite ? "Added to" : "Removed from"
            } favorites!`,
            classes: "rounded",
          });
        }
      }

      // Delete tool
      function deleteTool(toolId) {
        if (confirm("Are you sure you want to delete this tool?")) {
          tools = tools.filter((tool) => tool.id !== toolId);

          // Save to localStorage
          localStorage.setItem("toolsData", JSON.stringify(tools));

          // Re-render tools
          const activeCategory = document
            .querySelector(".category-chip.active")
            .getAttribute("data-category");
          const currentSearch = searchInput.value;
          renderTools(activeCategory, currentSearch);

          // Show feedback
          M.toast({ html: "Tool deleted!", classes: "rounded" });
        }
      }

      // Add new tool
      function addNewTool() {
        const name = document.getElementById("tool-name").value.trim();
        const description = document
          .getElementById("tool-description")
          .value.trim();
        const url = document.getElementById("tool-url").value.trim();
        const category = document.getElementById("tool-category").value;

        if (!name || !description || !url || !category) {
          M.toast({
            html: "Please fill out all fields!",
            classes: "rounded red",
          });
          return;
        }

        // Generate a new ID by finding the highest ID and adding 1
        const newId =
          tools.length > 0 ? Math.max(...tools.map((tool) => tool.id)) + 1 : 1;

        // Create new tool object
        const newTool = {
          id: newId,
          name,
          description,
          url,
          category,
          isFavorite: false,
          dateAdded: new Date().toISOString().split("T")[0],
        };

        // Add to tools array
        tools.push(newTool);

        // Save to localStorage
        localStorage.setItem("toolsData", JSON.stringify(tools));

        // Reset form fields
        addToolForm.reset();

        // Close modal
        const modalInstance = M.Modal.getInstance(
          document.getElementById("add-tool-modal")
        );
        modalInstance.close();

        // Re-render tools
        const activeCategory = document
          .querySelector(".category-chip.active")
          .getAttribute("data-category");
        const currentSearch = searchInput.value;
        renderTools(activeCategory, currentSearch);

        // Show feedback
        M.toast({ html: "New tool added!", classes: "rounded" });
      }

      // Event Listeners

      // Category filter
      categoryChips.forEach((chip) => {
        chip.addEventListener("click", function () {
          // Remove active class from all chips
          categoryChips.forEach((c) => c.classList.remove("active"));

          // Add active class to clicked chip
          this.classList.add("active");

          // Get category and render tools
          const category = this.getAttribute("data-category");
          renderTools(category, searchInput.value);
        });
      });

      // Search filter
      searchInput.addEventListener("input", function () {
        const activeCategory = document
          .querySelector(".category-chip.active")
          .getAttribute("data-category");
        renderTools(activeCategory, this.value);
      });

      // Save tool button
      saveToolBtn.addEventListener("click", addNewTool);
    </script>
  </body>
</html>
